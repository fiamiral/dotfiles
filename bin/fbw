#!/bin/bash

set -eu

bw sync 1>&2

set +u
if [[ -z $BW_SESSION ]]; then
    export BW_SESSION
    BW_SESSION=$(bw unlock --raw)
fi
set -u

selected_item=$(bw list items | jq -r '.[].name' | fzf-float)
query=$(printf "item\nusername\npassword\ntotp" | fzf-float)

bw get "$query" "$selected_item"
